<!doctype html>

<html>

  <head>
    <title>Сомнительные слова</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 20px;
      }
    </style>
  </head>
 <!---   <form method="post"
          action="/cN08Yh3CNWaIVe0OAeBDflxw79hQP44CvEtGe4doGyVUgaNMgRKrazdGPcobgugxGAwV2Z2fP1vBD8sa5qO89ZVLX41x4t91XnFV">
        Delete from complained: <br/> <input type="text" name="word"/>
        <td><input type="submit" value="Delete"/></td>
    </form>
    <form method="post"
          action="/pYDpUoXspsJTVhqBai7hrV7uKs5MN0VUhE80ksWGGuQhazGbVPUhcPSzpztdboY34yFstsL56GMHkOI3SWUtF5Cwml23NDt6Yuou">
        Delete from global: <br/> <input type="text" name="word"/>
        <td><input type="submit" value="Delete"/></td>
    </form> -->

<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/admin">Sombrero-admin</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li>
              <a href="/edit_words">Добавление слов</a>
            </li>
            <li>
              <a href="/global/edit/0">Редактирование словаря</a>
            </li>
            <li>
              <a href="/streams">Потоки слов</a>
            </li>
             <li>
              <a href="/admin/complain/list">Жалобы на слова</a>
            </li>
          </ul>
          <form class="navbar-form navbar-right">
            <div class="form-group"></div>
            <div class="form-group"></div>
            <button type="submit" class="btn btn-success">Sign in</button>
          </form>
        </div>
        <!--/.navbar-collapse -->
      </div>
    </div>

    <script type="application/javascript">

        function getXmlHttp() {
            var xmlhttp;
            try {
              xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
            try {
              xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (E) {
              xmlhttp = false;
            }
            }
            if (!xmlhttp && typeof XMLHttpRequest!='undefined') {
              xmlhttp = new XMLHttpRequest();
            }
            return xmlhttp;
          }

        function post(url, word)
        {
            // alert(xmlhttp);
            var xmlhttp = getXmlHttp();
            xmlhttp.open('POST', url, true);
            xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); // Отправляем кодировку
            xmlhttp.send("word=" + word); // Отправляем POST-запрос
        }

        function delete_here(word, number)
        {
            for (var i = 0; i < {{ quantity }}; i = i + 1)
            {
                try
                {
                    document.getElementById(word + "_" + i).style.display = "none";
                }
                catch(err)
                {
                    ;
                }
            }
            post('/admin/complain/cancel', word);
        }
        function delete_global(word, number)
        {
            for (var i = 0; i < {{ quantity }}; i = i + 1)
            {
                try
                {
                    document.getElementById(word + "_" + i).style.display = "none";
                }
                catch(err)
                {
                    ;
                }
            }
            post('/admin/complain/remove', word);
        }
    </script>
    <p align="right"> <a href="/admin"> Взад к админскому интерфейсу </a> </p>
    <div class="container">
        <div class="left">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Устройство</th>
                <th>Слово</th>
                 <th>Причина</th>
                  <th>Замена</th>
                  <th>     <br> <form method="post" action="/admin/complain/clear"> <input type="submit" value="Игнорировать все"/> </form> </th>
              </tr>
            </thead>
         <tbody>
        {% for word in words %}
            <tr id="{{ word.word }}_{{ word.cnt }}" >
                <td>{{ word.device_id }}</td>
                <td>{{ word.word }} </td>
                <td>{{ word.reason }}</td>
                <td>{{ word.replacement_word }}</td>
                <td align="center"> <button onclick="delete_here('{{ word.word }}', '{{ word.cnt }}')"> Игнорировать </button></td>
                <td align="center"> <button onclick="delete_global('{{ word.word }}', '{{ word.cnt }}')"> Удалить из словаря </button> </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
  </body>

</html>




