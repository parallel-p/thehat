{% extends "templates/base.html" %}
{% block title %}Сомнительные слова :: Шляпа{% endblock %}
{% block contentheader %}Сомнительные слова{% endblock %}

{% block content %}
 <!---   <form method="post"
          action="/cN08Yh3CNWaIVe0OAeBDflxw79hQP44CvEtGe4doGyVUgaNMgRKrazdGPcobgugxGAwV2Z2fP1vBD8sa5qO89ZVLX41x4t91XnFV">
        Delete from complained: <br/> <input type="text" name="word"/>
        <td><input type="submit" value="Delete"/></td>
    </form>
    <form method="post"
          action="/pYDpUoXspsJTVhqBai7hrV7uKs5MN0VUhE80ksWGGuQhazGbVPUhcPSzpztdboY34yFstsL56GMHkOI3SWUtF5Cwml23NDt6Yuou">
        Delete from global: <br/> <input type="text" name="word"/>
        <td><input type="submit" value="Delete"/></td>
    </form> -->
    <form method="post"
          action="/delete_all_words">
        <td><input type="submit" value="Delete All"/></td>
    </form>
    <script type="application/javascript">

        function getXmlHttp() {
            var xmlhttp;
            try {
              xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
            try {
              xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (E) {
              xmlhttp = false;
            }
            }
            if (!xmlhttp && typeof XMLHttpRequest!='undefined') {
              xmlhttp = new XMLHttpRequest();
            }
            return xmlhttp;
          }

        function post(url, word)
        {
            // alert(xmlhttp);
            var xmlhttp = getXmlHttp();
            xmlhttp.open('POST', url, true);
            xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); // Отправляем кодировку
            xmlhttp.send("word=" + word); // Отправляем POST-запрос
        }

        function delete_here(word, number)
        {
            for (var i = 0; i < {{ quantity }}; i = i + 1)
            {
                try
                {
                    document.getElementById(word + "_" + i).style.display = "none";
                }
                catch(err)
                {
                    ;
                }
            }
            post('/delete_curr', word);
        }
        function delete_global(word, number)
        {
            for (var i = 0; i < {{ quantity }}; i = i + 1)
            {
                try
                {
                    document.getElementById(word + "_" + i).style.display = "none";
                }
                catch(err)
                {
                    ;
                }
            }
            post('/delete_glob', word);
        }
    </script>
    <table border="10">
        <tr>
            <td>Устройство</td>
            <td>Слово</td>
            <td>Причина</td>
            <td>Замена</td>
            <td></td>
            <td></td>
        </tr>
        {% for word in words %}
            <tr id="{{ word.word }}_{{ word.cnt }}" >
                <td>{{ word.device_id }}</td>
                <td>{{ word.word }} </td>
                <td>{{ word.reason }}</td>
                <td>{{ word.replacement_word }}</td>
                <td> <button onclick="delete_here('{{ word.word }}', '{{ word.cnt }}')"> Игнорировать </button></td>
                <td> <button onclick="delete_global('{{ word.word }}', '{{ word.cnt }}')"> Удалить из словаря </button> </td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}




