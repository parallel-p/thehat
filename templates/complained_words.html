{% extends "templates/base.html" %}
{% block title %}Сомнительные слова - Шляпа{% endblock %}
{% block contentheader %}Сомнительные слова{% endblock %}
{% block content %}
    <script type="application/javascript">

        function getXmlHttp() {
            var xmlhttp;
            try {
              xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
            try {
              xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (E) {
              xmlhttp = false;
            }
            }
            if (!xmlhttp && typeof XMLHttpRequest!='undefined') {
              xmlhttp = new XMLHttpRequest();
            }
            return xmlhttp;
          }

        function post(url, word)
        {
            // alert(xmlhttp);
            var xmlhttp = getXmlHttp();
            xmlhttp.open('POST', url, true);
            xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); // Отправляем кодировку
            xmlhttp.send("word=" + word); // Отправляем POST-запрос
        }

        function delete_here(word, number)
        {
            for (var i = 0; i < {{ quantity }}; i = i + 1)
            {
                try
                {
                    document.getElementById(word + "_" + i).style.display = "none";
                }
                catch(err)
                {
                    ;
                }
            }
            post('/admin/complain/cancel', word);
        }
        function delete_global(word, number)
        {
            for (var i = 0; i < {{ quantity }}; i = i + 1)
            {
                try
                {
                    document.getElementById(word + "_" + i).style.display = "none";
                }
                catch(err)
                {
                    ;
                }
            }
            post('/admin/complain/remove', word);
        }
    </script>
    <div class="container">
        <div class="left">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Устройство</th>
                <th>Слово</th>
                 <th>Причина</th>
                  <th>Замена</th>
                  <th>     <br> <form method="post" action="/admin/complain/clear"> <input type="submit" value="Игнорировать все"/> </form> </th>
              </tr>
            </thead>
         <tbody>
        {% for word in words %}
            <tr id="{{ word.word }}_{{ word.cnt }}" >
                <td>{{ word.device_id }}</td>
                <td>{{ word.word }} </td>
                <td>{{ word.reason }}</td>
                <td>{{ word.replacement_word }}</td>
                <td align="center"> <button onclick="delete_here('{{ word.word }}', '{{ word.cnt }}')"> Игнорировать </button></td>
                <td align="center"> <button onclick="delete_global('{{ word.word }}', '{{ word.cnt }}')"> Удалить из словаря </button> </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
        </div>
    </div>
{% endblock %}